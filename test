import flet as ft

def main(page: ft.Page):
    page.title = "Flet Layout Example"

    # Initially set the theme mode to "light"
    page.theme_mode = "light"

    # Define a function to toggle between light and dark themes
    def toggle_theme(e):
        if page.theme_mode == "light":
            page.theme_mode = "dark"
        else:
            page.theme_mode = "light"
        # Update the page after changing the theme mode
        page.update()

    # Column 1: Vertical navigation bar with icons
    vertical_nav = ft.Column(
        [
            ft.IconButton(ft.icons.SETTINGS),
            ft.IconButton(ft.icons.ACCOUNT_CIRCLE),
            ft.IconButton(ft.icons.NOTIFICATIONS),
            ft.IconButton(ft.icons.EMOJI_EMOTIONS),
        ],
        alignment=ft.MainAxisAlignment.START,
        spacing=100
    )
    
    # Column 2: Input fields section
    input_fields = ft.Column(
        [
            ft.TextField(label="Field 1", width=100),
            ft.TextField(label="Field 2", width=100),
            ft.TextField(label="Field 3", width=100),
            ft.TextField(label="Field 4", width=100),
        ],
        alignment=ft.MainAxisAlignment.SPACE_EVENLY,
        spacing=15
    )
    
    # Column 3: Randomize and Constraints section
    randomize_button = ft.ElevatedButton(text="Randomize", width=150)
    
    constraints_section = ft.Column(
        [
            ft.Text("Constraints", style="headlineMedium"),
            ft.Slider(min=0, max=100, value=50),
            ft.RadioGroup(
                content=ft.Row(
                    [
                        ft.Radio(value="1", label="Option 1"),
                        ft.Radio(value="2", label="Option 2"),
                    ]
                )
            ),
            ft.Checkbox(label="Enable constraint"),
        ],
        alignment=ft.MainAxisAlignment.SPACE_AROUND,
        spacing=20
    )

    # Theme toggle button
    theme_toggle = ft.Switch(
        label="Dark Mode",
        value=False,  # Default is light mode
        on_change=toggle_theme
    )

    # Left Sidebar (20% width)
    sidebar = ft.Container(
        vertical_nav,
        width=200,  # Fixed width for sidebar
        height=page.height,
        bgcolor=ft.colors.BLUE_100,
        padding=10,
        alignment=ft.alignment.center
    )

    # Top Header (10% height)
    header = ft.Container(
        content=ft.Row(
            [
                ft.Text("Header"),
                theme_toggle  # Add the theme toggle switch to the header
            ],
            alignment=ft.MainAxisAlignment.SPACE_BETWEEN
        ),
        height=60,  # Fixed height for header
        bgcolor=ft.colors.GREEN_100,
        padding=10,
        alignment=ft.alignment.center
    )

    # Left Section inside the Main Content
    left_content = ft.Container(
        content=input_fields,
        bgcolor=ft.colors.RED_100,
        padding=10,
        expand=True,  # Takes up half of the available space
        alignment=ft.alignment.center
    )

    # Right Section inside the Main Content
    right_content = ft.Container(
        ft.Column(
            [
                constraints_section,
                randomize_button
            ],
            spacing=20
        ),
        bgcolor=ft.colors.PURPLE_100,
        padding=10,
        expand=True,  # Takes up half of the available space
        alignment=ft.alignment.center
    )

    # Main Content with two sections (Left and Right)
    main_content = ft.Row(
        [
            left_content,
            right_content
        ],
        expand=True  # Expand horizontally to fit the container
    )

    # Combine Header and Main Content using a Column
    right_section = ft.Column(
        [
            header,
            main_content
        ],
        expand=True  # Takes up 80% width of the screen
    )

    # Create a Row with Sidebar on the left and Right Section
    layout = ft.Row(
        [
            sidebar,
            right_section
        ],
        expand=True  # Allows the Row to expand full width
    )

    page.add(layout)


# Run the app
ft.app(target=main)
